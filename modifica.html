<!DOCTYPE html>
<html lang="es">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">

  <title>Modificar - Sincronizaci칩n</title>

  <script src="js/registraServiceWorker.js"></script>

  <meta name="viewport" content="width=device-width">
  <meta name="theme-color" content="#fffbfe">
  <link rel="icon" sizes="48x48" href="favicon.ico">
  <link rel="manifest" href="site.webmanifest">
  <script src="ungap/custom-elements.js"></script>

  <script type="module" src="js/configura.js"></script>
  <link rel="stylesheet" href="css/estilos.css">
  <link rel="stylesheet" href="css/transicion_pestanas.css">

  <link rel="stylesheet" href="css/dark-hc.css">
  <link rel="stylesheet" href="css/dark-mc.css">
  <link rel="stylesheet" href="css/dark.css">
  <link rel="stylesheet" href="css/light-hc.css">
  <link rel="stylesheet" href="css/light-mc.css">
  <link rel="stylesheet" href="css/light.css">


  <script type="module" src="js/configura.js"></script>
  <script type="module" src="lib/js/muestraError.js"></script>
  <script type="module" src="lib/js/muestraObjeto.js"></script>
  <script type="module" src="js/bd/alumnoBusca.js"></script>
  <script type="module" src="js/bd/alumnoElimina.js"></script>
  <script type="module" src="js/bd/alumnoModifica.js"></script>

  <script>
    // Obtiene los par치metros de la p치gina.
    const parametros = new URL(location.href).searchParams
    const paramId = parametros.get("id")
  </script>

</head>
<body onload="
  if (paramId !== null) {
    alumnoBusca(paramId)
      .then(alumno => {
        if (alumno === undefined) throw new Error('Alumno no encontrado.')
        muestraObjeto(forma, {
          alumno: { value: alumno.ALU_NOMBRE },
          materia: { value: alumno.ALU_ASIGNATURA },
          turno: { value: alumno.ALU_TURNO }
        })
      })
      .catch(muestraError)
  }
">

<form id="forma" onsubmit="
  event.preventDefault()
  if (paramId !== null) {
    const ALU_ID = paramId
    const ALU_NOMBRE = forma.alumno.value.trim()
    const ALU_ASIGNATURA = forma.materia.value.trim()
    const ALU_TURNO = forma.turno.value.trim()
    const modelo = { ALU_ID, ALU_NOMBRE, ALU_ASIGNATURA, ALU_TURNO }
    alumnoModifica(modelo)
      .then(() => location.href = 'index.html')
      .catch(muestraError)
  }
">

  <md-top-app-bar>
    <center><h1>Modificar Alumno</h1></center>
  </md-top-app-bar>
  <nav-tab-fixed id="tab"></nav-tab-fixed>

  <main>
    <p>
      <md-top-app-bar adicional="tab" headline="headline">

      <a href="index.html">
        <button class="md-standard-icon-button" type="button" title="Cancelar" slot="navigation">
          <span class="material-symbols-outlined">cancel</span>
        </button>
      </a>
      <button class="md-standard-icon-button" type="submit" title="Guardar" slot="action">
        <span class="material-symbols-outlined">save</span>
      </button>

      <button is="md-overflow-button" slot="action" onclick="overflow.alterna(this)"></button>

    </md-top-app-bar>

      <md-overflow-menu id="overflow">

    <button type="button" onclick="
    if (paramId !== null && confirm('Confirma la eliminaci칩n')) {
     playeraElimina(paramId)
      .then(() => location.href = 'index.html')
      .catch(muestraError)
    }">
      <span class="material-symbols-outlined"> delete</span> Eliminar
    </button>

  </md-overflow-menu>
    </p>

    <input name="id" type="hidden">

    <p>
      <p>Nombre del alumno</p>
      <label class="md-filled-text-field">
        <input required placeholder="Nombre del alumno*" name="alumno">
        <span>Nombre del alumno *</span>
        <small>Obligatorio</small>
      </label>
    </p>

    <p>
      <p>Materia</p>
      <label class="md-filled-text-field">
        <input required placeholder="Materia*" name="materia">
        <span>Materia *</span>
        <small>Obligatorio</small>
      </label>
    </p>

    <p>
      <p>Turno</p>
      <label class="md-filled-text-field">
        <input required placeholder="Turno*" name="turno">
        <span>Turno *</span>
        <small>Obligatorio</small>
      </label>
    </p>

  </main>
  <nav-drw></nav-drw>

</form>
</body>
